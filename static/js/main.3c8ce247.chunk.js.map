{"version":3,"sources":["components/dynoTable/Pagination.js","components/dynoTable/Table.js","components/dynoTable/TableHead.js","components/dynoTable/BodyRow.js","components/dynoTable/BodyColumn.js","components/dynoTable/TableBody.js","components/dynoTable/HeadRow.js","components/dynoTable/HeadColumn.js","utils/index.js","hocs/withCatsFetcher.js","components/settings/Settings.js","components/modal/Modal.js","app/App.js","index.js"],"names":["PAGING_DIRECTION","NEXT","PREV","Pagination","onPaginationChange","count","rowsPerPage","useState","currentPage","setCurrentPage","useEffect","className","onClick","handleClick","direction","_evt","nextPage","Math","floor","Table","children","isPagination","TableHead","memo","onRowClick","evt","TableBody","HeadRow","SORT_ORDER","NONE","ASC","DESC","onSortChange","sortOrder","setSortOrder","clsx","sliceByRange","arr","index","range","Array","isArray","Error","slice","CATS_API","Settings","onSettingsChange","defaultPagination","setIsPagination","WrappedComponent","Modal","this","modalTarget","document","createElement","modalBackdrop","body","appendChild","_render","setTimeout","classList","add","remove","ReactDOM","unmountComponentAtNode","removeChild","props","render","renderModalDialogue","PureComponent","App","state","data","sortBy","prop","currentScroll","selectedItemId","showModal","selectedItem","ticking","lastKnownScrollPosition","handleSortChange","bind","handleSettingsChange","handlePaginationChange","handleRowClick","handleModalButtonClick","handleLazyLoadOnScroll","_prevProps","prevState","length","setState","window","addEventListener","removeEventListener","scrollY","requestAnimationFrame","max","scrollHeight","offsetHeight","pageYOffset","innerHeight","scrollTo","propToSort","sortDirection","findIndex","newSortBy","id","isFetching","error","sort","left","right","i","result","multipleSort","dataToShow","sliceAndAddByRange","message","map","idx","name","country","favorite_greeting","selectedClassName","key","withCatsFetcher","cats","fetchCats","axios","get","then","catch","getElementById"],"mappings":"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","file":"static/js/main.3c8ce247.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Pagination.scss\";\n\nconst PAGING_DIRECTION = {\n  NEXT: 1,\n  PREV: -1\n}\n\nexport default function Pagination({ onPaginationChange = () => {}, count = 0 , rowsPerPage = 10}) {\n  const [currentPage, setCurrentPage] = useState(1);\n  useEffect(function() {\n    onPaginationChange(currentPage);\n  // eslint-disable-next-line\n  }, [currentPage]);\n  return (\n    <div className=\"Pagination\">\n      <div>{`Page: ${currentPage}`}</div>\n      <button onClick={handleClick(PAGING_DIRECTION.PREV)}>Prev</button>\n      <button onClick={handleClick(PAGING_DIRECTION.NEXT)}>Next</button>\n    </div>\n  );\n\n  function handleClick(direction) {\n    return function(_evt) {\n      const nextPage = currentPage + direction;\n      if (nextPage <= 0 || nextPage >= getMaxPages()) {\n        setCurrentPage(currentPage);\n      } else {\n        setCurrentPage(nextPage)\n      }\n    }\n  }\n\n  function getMaxPages() {\n    return Math.floor(count / rowsPerPage);\n  }\n}\n","import React from \"react\";\nimport Pagination from \"./Pagination\";\nimport \"./Table.scss\";\n\nexport default function Table({\n  children,\n  isPagination,\n  onPaginationChange,\n  count,\n  rowsPerPage\n}) {\n  return (\n    <div className=\"Table\">\n      {children}\n      {isPagination && (\n        <Pagination\n          onPaginationChange={onPaginationChange}\n          count={count}\n          rowsPerPage={rowsPerPage}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function TableHead({children}) {\n  return (\n    <div className=\"flexContainer\">\n      {children}\n    </div>\n  )\n}\n","import React, { memo } from \"react\";\n\nfunction BodyRow({ children, onRowClick = () => {}, className = \"\" }) {\n  return (\n    <div className={`flexChild rowParent ${className}`} onClick={handleClick}>\n      {children}\n    </div>\n  );\n\n  function handleClick(evt) {\n    onRowClick(evt);\n  }\n}\n\nexport default memo(BodyRow);\n","import React, { memo } from \"react\";\nimport \"./BodyColumn.scss\";\n\nfunction BodyColumn({ children, className = \"\" }) {\n  return (\n    <div className={`flexChild columnParent BodyColumn ${className}`}>\n      {children}\n    </div>\n  );\n}\n\nexport default memo(BodyColumn);\n","import React from \"react\";\n\nexport default function TableBody({ children }) {\n  return <div className=\"flexContainer\">{children}</div>;\n}\n","import React from \"react\";\n\nexport default function HeadRow({ children }) {\n  return <div className=\"flexChild rowParent\">{children}</div>;\n}\n","import React, { useState, useEffect, memo } from \"react\";\nimport clsx from \"classnames\";\nimport \"./HeadColumn.scss\";\n\nexport const SORT_ORDER = {\n  NONE: 0,\n  ASC: 1,\n  DESC: -1\n};\n\nfunction HeadColumn({ children, onSortChange = () => {} }) {\n  const [sortOrder, setSortOrder] = useState(SORT_ORDER.NONE);\n\n  useEffect(() => {\n    if (sortOrder !== SORT_ORDER.NONE) {\n      onSortChange(sortOrder);\n    }\n  // eslint-disable-next-line\n  }, [sortOrder]);\n  \n  return (\n    <div\n      className={clsx(\"flexChild\", \"parentColumn\", \"HeadColumn\", {\n        \"HeadColumn--asc\": sortOrder === SORT_ORDER.ASC,\n        \"HeadColumn--desc\": sortOrder === SORT_ORDER.DESC\n      })}\n      onClick={handleClick}\n    >\n      {children}\n    </div>\n  );\n\n  function handleClick(_evt) {\n    switch (sortOrder) {\n      case SORT_ORDER.NONE:\n        setSortOrder(SORT_ORDER.ASC);\n        break;\n      case SORT_ORDER.ASC:\n        setSortOrder(SORT_ORDER.DESC);\n        break;\n      case SORT_ORDER.DESC:\n        setSortOrder(SORT_ORDER.ASC);\n        break;\n      default:\n        setSortOrder(SORT_ORDER.NONE);\n    }\n  }\n}\n\nexport default memo(HeadColumn);\n","export function multipleSort(arr, sortBy) {\n  if (Array.isArray(arr)) {\n    arr.sort(function(left, right) {\n      let i = 0;\n      let result = 0;\n      while (i < sortBy.length && result === 0) {\n        if (left[sortBy[i].prop] < right[sortBy[i].prop]) {\n          result = -1;\n        }\n\n        if (left[sortBy[i].prop] > right[sortBy[i].prop]) {\n          result = 1;\n        }\n\n        result = result * sortBy[i].direction;\n        i++;\n      }\n      return result;\n    });\n  } else {\n    throw new Error(\"Unsupported type for first argument\");\n  }\n}\n\nexport function sliceByRange(arr, index, range) {\n  if (!Array.isArray(arr)) {\n    throw new Error(\"Unsupported data type\");\n  }\n\n  if (index <= 0) {\n    throw new Error(\"Index must be not null and not negative\");\n  }\n\n  return arr.slice((index - 1) * range, index * range);\n}\n\nexport function sliceAndAddByRange(arr, index, range) {\n  if (!Array.isArray(arr)) {\n    throw new Error(\"Unsupported data type\");\n  }\n\n  if (index <= 0) {\n    return [];\n  }\n\n  return [...sliceAndAddByRange(arr, index - 1, range),...sliceByRange(arr, index, range)];\n}\n","import React, { PureComponent } from \"react\";\nimport axios from \"axios\";\n\nconst CATS_API =\n  \"https://raw.githubusercontent.com/viktornar/dynotable/master/data/cats.json\";\n\nexport default function withCatsFetcher(WrappedComponent) {\n  return class CatsFetcher extends PureComponent {\n    constructor(props) {\n      super(props);\n      this.state = {\n        isFetching: false,\n        error: null,\n        cats: []\n      };\n\n      this.fetchCats = this.fetchCats.bind(this);\n    }\n\n    componentDidMount() {\n      this.fetchCats();\n    }\n\n    fetchCats() {\n      this.setState({ isFetching: true });\n      axios\n        .get(CATS_API)\n        .then(({ data: { cats } }) => {\n          this.setState({ cats, isFetching: false });\n        })\n        .catch(error => {\n          this.setState({ error, isFetching: false });\n        });\n    }\n\n    render() {\n      const { isFetching, cats, error } = this.state;\n      return (\n        <WrappedComponent\n          isFetching={isFetching}\n          data={cats}\n          error={error}\n          {...this.props}\n        />\n      );\n    }\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport \"./Settings.scss\";\n\nexport default function Settings({ onSettingsChange = () => {}, defaultPagination = false }) {\n  const [isPagination, setIsPagination] = useState(defaultPagination);\n\n  useEffect(\n    function() {\n      onSettingsChange({ isPagination });\n    },\n    // eslint-disable-next-line\n    [isPagination]\n  );\n\n  return (\n    <div className=\"Settings\">\n      <button onClick={handleClick}>{`Switch to ${\n        isPagination ? \"full view\" : \"pages\"\n      }`}</button>\n    </div>\n  );\n\n  function handleClick() {\n    setIsPagination(!isPagination);\n  }\n}\n","import React, { PureComponent } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Modal.scss\";\n\nexport default class Modal extends PureComponent {\n  componentDidMount() {\n    this.modalTarget = document.createElement(\"div\");\n    this.modalBackdrop = document.createElement(\"div\");\n    this.modalTarget.className = \"Modal\";\n    this.modalBackdrop.className = \"Modal__backdrop\";\n    document.body.appendChild(this.modalTarget);\n    document.body.appendChild(this.modalBackdrop);\n    this._render();\n\n    setTimeout(() => {\n      this.modalTarget.classList.add(\"Modal--in\");\n      this.modalBackdrop.classList.add(\"Modal__backdrop--in\");\n    }, 40);\n  }\n\n  componentDidUpdate() {\n    this._render();\n  }\n\n  componentWillUnmount() {\n    this.modalTarget.classList.remove(\"Modal--in\");\n    this.modalBackdrop.classList.remove(\"Modal__backdrop--in\");\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(this.modalTarget);\n      document.body.removeChild(this.modalTarget);\n      document.body.removeChild(this.modalBackdrop);\n    }, 500);\n  }\n\n  renderModalDialogue() {\n    return <div className=\"Modal__dialogue\">{this.props.children}</div>;\n  }\n\n  _render() {\n    ReactDOM.render(this.renderModalDialogue(), this.modalTarget);\n  }\n\n  render() {\n    return <noscript />;\n  }\n}\n","import React, { PureComponent } from \"react\";\nimport clsx from \"classnames\";\nimport {\n  Table,\n  TableHead,\n  BodyRow,\n  BodyColumn,\n  TableBody,\n  HeadRow,\n  HeadColumn\n} from \"../components/dynoTable\";\nimport \"./App.scss\";\nimport { multipleSort, sliceByRange, sliceAndAddByRange } from \"../utils\";\nimport withCatsFetcher from \"../hocs/withCatsFetcher\";\nimport Settings from \"../components/settings/Settings\";\nimport Modal from \"../components/modal/Modal\";\n\nconst ROWS_PER_PAGE = 10;\nconst ROWS_PER_SCROLL = 100;\n\nexport class App extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      sortBy: [\n        {\n          prop: \"name\",\n          direction: 0\n        },\n        {\n          prop: \"country\",\n          direction: 0\n        },\n        {\n          prop: \"favorite_greeting\",\n          direction: 0\n        }\n      ],\n      isPagination: true,\n      currentPage: 1,\n      currentScroll: 1,\n      selectedItemId: \"\",\n      showModal: false,\n      selectedItem: {}\n    };\n\n    this.ticking = false;\n    this.lastKnownScrollPosition = 0;\n    this.handleSortChange = this.handleSortChange.bind(this);\n    this.handleSettingsChange = this.handleSettingsChange.bind(this);\n    this.handlePaginationChange = this.handlePaginationChange.bind(this);\n    this.handleRowClick = this.handleRowClick.bind(this);\n    this.handleModalButtonClick = this.handleModalButtonClick.bind(this);\n    this.handleLazyLoadOnScroll = this.handleLazyLoadOnScroll.bind(this);\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.data.length !== this.props.data.length) {\n      this.setState({ data: this.props.data });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.handleLazyLoadOnScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleLazyLoadOnScroll);\n  }\n\n  handleLazyLoadOnScroll() {\n    this.lastKnownScrollPosition = window.scrollY;\n\n    if (!this.ticking) {\n      window.requestAnimationFrame(() => {\n        const pageHeight = Math.max(\n          document.body.scrollHeight,\n          document.body.offsetHeight\n        );\n        const scrollDistanceFromBottom =\n          pageHeight - (window.pageYOffset + window.innerHeight);\n\n        if (scrollDistanceFromBottom < 150) {\n          this.setState({ currentScroll: this.state.currentScroll + 1 });\n          window.scrollTo = this.lastKnownScrollPosition - 200;\n        }\n\n        this.ticking = false;\n      });\n\n      this.ticking = true;\n    }\n  }\n\n  handleSortChange(propToSort) {\n    return sortDirection => {\n      const { sortBy } = this.state;\n      const index = sortBy.findIndex(({ prop }) => prop === propToSort);\n      const newSortBy = [...sortBy];\n      newSortBy[index].direction = sortDirection;\n      this.setState({\n        sortBy: newSortBy\n      });\n    };\n  }\n\n  handleSettingsChange({ isPagination }) {\n    this.setState({ isPagination });\n  }\n\n  handlePaginationChange(currentPage) {\n    this.setState({ currentPage });\n  }\n\n  handleRowClick(selectedItem) {\n    return _evt => {\n      this.setState({\n        selectedItemId: selectedItem.id,\n        showModal: true,\n        selectedItem\n      });\n    };\n  }\n\n  handleModalButtonClick() {\n    this.setState({ showModal: false });\n  }\n\n  render() {\n    const { isFetching, error } = this.props;\n    const {\n      isPagination,\n      data,\n      currentPage,\n      currentScroll,\n      sortBy,\n      selectedItemId,\n      selectedItem,\n      showModal\n    } = this.state;\n    multipleSort(data, sortBy);\n    const dataToShow = isPagination\n      ? sliceByRange(data, currentPage, ROWS_PER_PAGE)\n      : sliceAndAddByRange(data, currentScroll, ROWS_PER_SCROLL);\n\n    return (\n      <div className=\"App\">\n        {error && (\n          <div className=\"App__error\">\n            Unexpected error occured: {error.message}\n          </div>\n        )}\n        <Settings\n          onSettingsChange={this.handleSettingsChange}\n          defaultPagination={isPagination}\n        />\n        <Table\n          isPagination={isPagination}\n          count={data.length}\n          rowsPerPage={ROWS_PER_PAGE}\n          onPaginationChange={this.handlePaginationChange}\n        >\n          <TableHead>\n            <HeadRow>\n              <HeadColumn onSortChange={this.handleSortChange(\"name\")}>\n                Name\n              </HeadColumn>\n              <HeadColumn onSortChange={this.handleSortChange(\"country\")}>\n                Country\n              </HeadColumn>\n              <HeadColumn\n                onSortChange={this.handleSortChange(\"favorite_greeting\")}\n              >\n                Greeting\n              </HeadColumn>\n            </HeadRow>\n          </TableHead>\n          <TableBody>\n            {isFetching ? (\n              <div className=\"App__loader\">Data is fetching...</div>\n            ) : (\n              <>\n                {dataToShow.length > 0 &&\n                  dataToShow.map(\n                    ({ id, name, country, favorite_greeting }, idx) => {\n                      const selectedClassName = clsx({\n                        \"App__table-row--selected\": selectedItemId === id\n                      });\n\n                      return (\n                        <BodyRow\n                          key={id}\n                          onRowClick={this.handleRowClick({\n                            id,\n                            name,\n                            country,\n                            favorite_greeting\n                          })}\n                        >\n                          <BodyColumn className={selectedClassName}>\n                            {name}\n                          </BodyColumn>\n                          <BodyColumn className={selectedClassName}>\n                            {country}\n                          </BodyColumn>\n                          <BodyColumn className={selectedClassName}>\n                            {favorite_greeting}\n                          </BodyColumn>\n                        </BodyRow>\n                      );\n                    }\n                  )}\n              </>\n            )}\n          </TableBody>\n        </Table>\n        {showModal && (\n          <Modal>\n            <div className=\"flexContainer\">\n              <div className=\"flexChild rowParent\">\n                <div className=\"flexChild columnParent\">\n                  <BodyRow>\n                    <div className=\"flexChild columnParent App__modal-table-head\">\n                      <BodyColumn>Name</BodyColumn>\n                      <BodyColumn>Country</BodyColumn>\n                      <BodyColumn>Greeting</BodyColumn>\n                    </div>\n                    <div className=\"flexChild columnParent\">\n                      <BodyColumn>{selectedItem.name}</BodyColumn>\n                      <BodyColumn>{selectedItem.country}</BodyColumn>\n                      <BodyColumn>{selectedItem.favorite_greeting}</BodyColumn>\n                    </div>\n                  </BodyRow>\n                  <button onClick={this.handleModalButtonClick}>Close</button>\n                </div>\n              </div>\n            </div>\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withCatsFetcher(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport WithCatsFetcherApp from \"./app/App\";\n\nReactDOM.render(<WithCatsFetcherApp />, document.getElementById(\"root\"));\n"],"sourceRoot":""}