(this.webpackJsonpdynotable=this.webpackJsonpdynotable||[]).push([[0],{22:function(e,t,n){e.exports=n(52)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),i=n.n(r),c=(n(27),n(10)),l=n(3),s=n(4),d=n(7),u=n(5),h=n(2),m=n(8),f=n(11),g=n.n(f),v=n(6),p=(n(28),{NEXT:1,PREV:-1});function C(e){var t=e.onPaginationChange,n=void 0===t?function(){}:t,r=e.count,i=void 0===r?0:r,c=e.rowsPerPage,l=void 0===c?10:c,s=Object(a.useState)(1),d=Object(v.a)(s,2),u=d[0],h=d[1];return Object(a.useEffect)((function(){n(u)}),[u]),o.a.createElement("div",{className:"Pagination"},o.a.createElement("div",null,"Page: ".concat(u)),o.a.createElement("button",{onClick:m(p.PREV)},"Prev"),o.a.createElement("button",{onClick:m(p.NEXT)},"Next"));function m(e){return function(t){var n=u+e;n<=0||n>=Math.floor(i/l)?h(u):h(n)}}}n(29);function E(e){var t=e.children,n=e.isPagination,a=e.onPaginationChange,r=e.count,i=e.rowsPerPage;return o.a.createElement("div",{className:"Table"},t,n&&o.a.createElement(C,{onPaginationChange:a,count:r,rowsPerPage:i}))}function b(e){var t=e.children;return o.a.createElement("div",{className:"flexContainer"},t)}var y=Object(a.memo)((function(e){var t=e.children,n=e.onRowClick,a=void 0===n?function(){}:n,r=e.className,i=void 0===r?"":r;return o.a.createElement("div",{className:"flexChild rowParent ".concat(i),onClick:function(e){a(e)}},t)}));n(30);var k=Object(a.memo)((function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return o.a.createElement("div",{className:"flexChild columnParent BodyColumn ".concat(a)},t)}));function S(e){var t=e.children;return o.a.createElement("div",{className:"flexContainer"},t)}function w(e){var t=e.children;return o.a.createElement("div",{className:"flexChild rowParent"},t)}n(31);var O={NONE:0,ASC:1,DESC:-1};var P=Object(a.memo)((function(e){var t=e.children,n=e.onSortChange,r=void 0===n?function(){}:n,i=Object(a.useState)(O.NONE),c=Object(v.a)(i,2),l=c[0],s=c[1];return Object(a.useEffect)((function(){l!==O.NONE&&r(l)}),[l]),o.a.createElement("div",{className:g()("flexChild","parentColumn","HeadColumn",{"HeadColumn--asc":l===O.ASC,"HeadColumn--desc":l===O.DESC}),onClick:function(e){switch(l){case O.NONE:s(O.ASC);break;case O.ASC:s(O.DESC);break;case O.DESC:s(O.ASC);break;default:s(O.NONE)}}},t)}));n(32);function N(e,t,n){if(!Array.isArray(e))throw new Error("Unsupported data type");if(t<=0)throw new Error("Index must be not null and not negative");return e.slice((t-1)*n,t*n)}var j=n(21),_=n.n(j),M="https://raw.githubusercontent.com/viktornar/dynotable/master/data/cats.json";n(50);function A(e){var t=e.onSettingsChange,n=void 0===t?function(){}:t,r=e.defaultPagination,i=void 0!==r&&r,c=Object(a.useState)(i),l=Object(v.a)(c,2),s=l[0],d=l[1];return Object(a.useEffect)((function(){n({isPagination:s})}),[s]),o.a.createElement("div",{className:"Settings"},o.a.createElement("button",{onClick:function(){d(!s)}},"Switch to ".concat(s?"full view":"pages")))}n(51);var x,B=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.modalTarget=document.createElement("div"),this.modalBackdrop=document.createElement("div"),this.modalTarget.className="Modal",this.modalBackdrop.className="Modal__backdrop",document.body.appendChild(this.modalTarget),document.body.appendChild(this.modalBackdrop),this._render(),setTimeout((function(){e.modalTarget.classList.add("Modal--in"),e.modalBackdrop.classList.add("Modal__backdrop--in")}),40)}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){var e=this;this.modalTarget.classList.remove("Modal--in"),this.modalBackdrop.classList.remove("Modal__backdrop--in"),setTimeout((function(){i.a.unmountComponentAtNode(e.modalTarget),document.body.removeChild(e.modalTarget),document.body.removeChild(e.modalBackdrop)}),500)}},{key:"renderModalDialogue",value:function(){return o.a.createElement("div",{className:"Modal__dialogue"},this.props.children)}},{key:"_render",value:function(){i.a.render(this.renderModalDialogue(),this.modalTarget)}},{key:"render",value:function(){return o.a.createElement("noscript",null)}}]),t}(a.PureComponent),L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={data:[],sortBy:[{prop:"name",direction:0},{prop:"country",direction:0},{prop:"favorite_greeting",direction:0}],isPagination:!0,currentPage:1,currentScroll:1,selectedItemId:"",showModal:!1,selectedItem:{}},n.ticking=!1,n.lastKnownScrollPosition=0,n.handleSortChange=n.handleSortChange.bind(Object(h.a)(n)),n.handleSettingsChange=n.handleSettingsChange.bind(Object(h.a)(n)),n.handlePaginationChange=n.handlePaginationChange.bind(Object(h.a)(n)),n.handleRowClick=n.handleRowClick.bind(Object(h.a)(n)),n.handleModalButtonClick=n.handleModalButtonClick.bind(Object(h.a)(n)),n.handleLazyLoadOnScroll=n.handleLazyLoadOnScroll.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.data.length!==this.props.data.length&&this.setState({data:this.props.data})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleLazyLoadOnScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleLazyLoadOnScroll)}},{key:"handleLazyLoadOnScroll",value:function(){var e=this;this.lastKnownScrollPosition=window.scrollY,this.ticking||(window.requestAnimationFrame((function(){Math.max(document.body.scrollHeight,document.body.offsetHeight)-(window.pageYOffset+window.innerHeight)<150&&(e.setState({currentScroll:e.state.currentScroll+1}),window.scrollTo=e.lastKnownScrollPosition-200),e.ticking=!1})),this.ticking=!0)}},{key:"handleSortChange",value:function(e){var t=this;return function(n){var a=t.state.sortBy,o=a.findIndex((function(t){return t.prop===e})),r=Object(c.a)(a);r[o].direction=n,t.setState({sortBy:r})}}},{key:"handleSettingsChange",value:function(e){var t=e.isPagination;this.setState({isPagination:t})}},{key:"handlePaginationChange",value:function(e){this.setState({currentPage:e})}},{key:"handleRowClick",value:function(e){var t=this;return function(n){t.setState({selectedItemId:e.id,showModal:!0,selectedItem:e})}}},{key:"handleModalButtonClick",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,a=t.error,r=this.state,i=r.isPagination,l=r.data,s=r.currentPage,d=r.currentScroll,u=r.sortBy,h=r.selectedItemId,m=r.selectedItem,f=r.showModal;!function(e,t){if(!Array.isArray(e))throw new Error("Unsupported type for first argument");e.sort((function(e,n){for(var a=0,o=0;a<t.length&&0===o;)e[t[a].prop]<n[t[a].prop]&&(o=-1),e[t[a].prop]>n[t[a].prop]&&(o=1),o*=t[a].direction,a++;return o}))}(l,u);var v=i?N(l,s,10):function e(t,n,a){if(!Array.isArray(t))throw new Error("Unsupported data type");return n<=0?[]:[].concat(Object(c.a)(e(t,n-1,a)),Object(c.a)(N(t,n,a)))}(l,d,100);return o.a.createElement("div",{className:"App"},a&&o.a.createElement("div",{className:"App__error"},"Unexpected error occured: ",a.message),o.a.createElement(A,{onSettingsChange:this.handleSettingsChange,defaultPagination:i}),o.a.createElement(E,{isPagination:i,count:l.length,rowsPerPage:10,onPaginationChange:this.handlePaginationChange},o.a.createElement(b,null,o.a.createElement(w,null,o.a.createElement(P,{onSortChange:this.handleSortChange("name")},"Name"),o.a.createElement(P,{onSortChange:this.handleSortChange("country")},"Country"),o.a.createElement(P,{onSortChange:this.handleSortChange("favorite_greeting")},"Greeting"))),o.a.createElement(S,null,n?o.a.createElement("div",{className:"App__loader"},"Data is fetching..."):o.a.createElement(o.a.Fragment,null,v.length>0&&v.map((function(t,n){var a=t.id,r=t.name,i=t.country,c=t.favorite_greeting,l=g()({"App__table-row--selected":h===a});return o.a.createElement(y,{key:a,onRowClick:e.handleRowClick({id:a,name:r,country:i,favorite_greeting:c})},o.a.createElement(k,{className:l},r),o.a.createElement(k,{className:l},i),o.a.createElement(k,{className:l},c))}))))),f&&o.a.createElement(B,null,o.a.createElement("div",{className:"flexContainer"},o.a.createElement("div",{className:"flexChild rowParent"},o.a.createElement("div",{className:"flexChild columnParent"},o.a.createElement(y,null,o.a.createElement("div",{className:"flexChild columnParent App__modal-table-head"},o.a.createElement(k,null,"Name"),o.a.createElement(k,null,"Country"),o.a.createElement(k,null,"Greeting")),o.a.createElement("div",{className:"flexChild columnParent"},o.a.createElement(k,null,m.name),o.a.createElement(k,null,m.country),o.a.createElement(k,null,m.favorite_greeting))),o.a.createElement("button",{onClick:this.handleModalButtonClick},"Close"))))))}}]),t}(a.PureComponent),T=(x=L,function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={isFetching:!1,error:null,cats:[]},n.fetchCats=n.fetchCats.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchCats()}},{key:"fetchCats",value:function(){var e=this;this.setState({isFetching:!0}),_.a.get(M).then((function(t){var n=t.data.cats;e.setState({cats:n,isFetching:!1})})).catch((function(t){e.setState({error:t,isFetching:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isFetching,n=e.cats,a=e.error;return o.a.createElement(x,Object.assign({isFetching:t,data:n,error:a},this.props))}}]),t}(a.PureComponent));i.a.render(o.a.createElement(T,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.3c8ce247.chunk.js.map